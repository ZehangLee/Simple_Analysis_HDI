readxl::read_xlsx("http://hdr.undp.org/sites/default/files/2018_statistical_annex_all.xlsx")
readxl::read_xlsx("hdr.undp.org/sites/default/files/2018_statistical_annex_all.xlsx")
readxl::read_excel("http://hdr.undp.org/sites/default/files/2018_statistical_annex_all.xlsx")
readxl::read_excel("http://hdr.undp.org/sites/default/files/2018_statistical_annex_all.xlsx",sheet=1)
readxl::read_xls("http://hdr.undp.org/sites/default/files/2018_statistical_annex_all.xlsx",sheet=1)
readxl::read_xlsx("http://hdr.undp.org/sites/default/files/2018_statistical_annex_all.xlsx",sheet=1)
temp <- tempfile()
download.file("http://hdr.undp.org/sites/default/files/2018_statistical_annex_all.xlsx",temp, mode="wb")
dd <- readxl::read_xlsx(temp,sheet = 1)
unlink(temp)
#readxl::read_xlsx("http://hdr.undp.org/sites/default/files/2018_statistical_annex_all.xlsx",sheet=1)
temp <- tempfile()
download.file("http://hdr.undp.org/sites/default/files/2018_statistical_annex_all.xlsx",temp, mode="wb")
hdi.data <- readxl::read_xlsx(temp,sheet = 1)
unlink(temp)
View(hdi.data)
table4a
tidyr::table4a
text=tidyr::table4a
View(text)
text=tidyr::table4b
View(text)
mtcars %>% pull(cyl)
library(tidyr)
mtcars %>% pull(cyl)
library(tidyverse)
mtcars %>% pull(cyl)
mtcars$cyl
hdi.data[1,]=NA
View(hdi.data)
hdi.data[1,c(1,2)]
hdi.data[2,c(1,2)]=hidi.data[3,c(1,2)]
hdi.data[2,c(1,2)]=hdi.data[3,c(1,2)]
View(hdi.data)
View(hdi.data)
hdi.data=slice(hdi.data,c(-1,-3,-4))
View(hdi.data)
temp1 <- tempfile()
download.file("http://hdr.undp.org/sites/default/files/2018_statistical_annex_all.xlsx",temp1, mode="wb")
hdi.databank <- readxl::read_xlsx(temp1,sheet = 1)
unlink(temp1)
temp2 <- tempfile()
download.file("http://hdr.undp.org/sites/default/files/2018_statistical_annex_all.xlsx",temp2, mode="wb")
hdi.stat <- readxl::read_xlsx(temp1,sheet = 1)
unlink(temp2)
temp1 <- tempfile()
download.file("http://hdr.undp.org/sites/default/files/2018_all_indicators.xlsx",temp1, mode="wb")
hdi.databank <- readxl::read_xlsx(temp1,sheet = 1)
unlink(temp1)
temp2 <- tempfile()
download.file("http://hdr.undp.org/sites/default/files/2018_statistical_annex_all.xlsx",temp2, mode="wb")
hdi.stat <- readxl::read_xlsx(temp1,sheet = 1)
unlink(temp2)
hdi.stat <- readxl::read_xlsx(temp2,sheet = 1)
temp2 <- tempfile()
download.file("http://hdr.undp.org/sites/default/files/2018_statistical_annex_all.xlsx",temp2, mode="wb")
hdi.stat <- readxl::read_xlsx(temp2,sheet = 1)
unlink(temp2)
rm(c(temp1,temp2))
rm(list(temp1,temp2))
rm(temp1,temp2)
year=colnames(hdi.databank)%>%select_if(starts_with(1|2))
year=colnames(hdi.databank)%>%select_if(starts_with("1"|"2"))
colnames(hdi.databank)
year=colnames(hdi.databank)%>%select_if(starts_with("b"))
year=colnames(hdi.databank)%>%select_if(starts_with("d"))
hdi.databank=tibble(hdi.databank)
year=colnames(hdi.databank)%>%select_if(starts_with("d"))
select_if
year=tibble(colnames(hdi.databank))%>%select_if(starts_with("d"))
year=tibble(colnames(hdi.databank))%>%select_if(starts_with("1"))
year=tibble(colnames(hdi.databank))%>%select_if(startswith("1"))
year=tibble(colnames(hdi.databank))%>%select_if(startsWith("1"))
startsWith
colnames(hdi.databank)
temp1 <- tempfile()
download.file("http://hdr.undp.org/sites/default/files/2018_all_indicators.xlsx",temp1, mode="wb")
hdi.databank <- readxl::read_xlsx(temp1,sheet = 1)
unlink(temp1)
temp2 <- tempfile()
download.file("http://hdr.undp.org/sites/default/files/2018_statistical_annex_all.xlsx",temp2, mode="wb")
hdi.stat <- readxl::read_xlsx(temp2,sheet = 1)
unlink(temp2)
rm(temp1,temp2)
year=as.character(seq(1990,20017))
year
year=as.character(seq(1990,2017))
year
hdi.databank%>%select(-"9999")
View(hdi.databank)
hdi.databank%>%select(-"9999")%>%gather(one_of(year),key = "year",value = "hdi")
test=hdi.databank%>%select(-"9999")%>%gather(one_of(year),key = "year",value = "hdi")
View(test)
set.seed(123456)
n <- 100
eps <- rnorm(n, sd = 2)
m <- function(x) x^3 * sin(x)
X <- rnorm(n, sd = 1.5)
Y <- m(X) + eps
x_grid <- seq(-10, 10, l = 500)
# KernSmooth::locpoly fits
h <- 0.25
lp0 <- KernSmooth::locpoly(x = X, y = Y, bandwidth = h, degree = 0,
range.x = c(-10, 10), gridsize = 500)#degree=0 ,local constant estimator
lp1 <- KernSmooth::locpoly(x = X, y = Y, bandwidth = h, degree = 1,
range.x = c(-10, 10), gridsize = 500)
total.energy.data=read.csv("D:/R script/R script time series/final project/Total_Primary_Energy_Production_Monthly.csv",header = TRUE)
energy.fuels.data=read.csv("D:/R script/R script time series/final project/Total_Fossil_Fuels_Production_Monthly.csv",header = TRUE)
energy.renewable.data=read.csv("D:/R script/R script time series/final project/Total_Renewable_Energy_Production_Monthly.csv",header = TRUE)
energy.nuclear.data=read.csv("D:/R script/R script time series/final project/Nuclear_Electric_Power_Consumption_per_Production_Monthly.csv",header=TRUE)
plot(energy.renewable.data[,2])
plot(energy.nuclear.data[,2])
total.prod=ts(total.energy.data[,2],start =c(1973,1),frequency = 12)
fuels.prod=ts(energy.fuels.data[,2],start =c(1973,1),frequency = 12)
renewable.prod=ts(energy.renewable.data[,2],start =c(1973,1),frequency = 12)
nuclear.prod=ts(energy.nuclear.data[,2],start =c(1973,1),frequency = 12)
plot(total.prod)
#log-transformation is required
total.decompose=decompose(total.prod)
plot(decompose(total.prod))
boxplot(total.prod~cycle(total.prod))#lowest production in Febrary
plot(total.decompose$figure,type='l')
ltotal.prod=log(total.prod)
plot(ltotal.prod)
dltotal.prod=diff(ltotal.prod)
plot(dltotal.prod)
ddltotal.prod=diff(dltotal.prod,diff=12)
acf(dltotal.prod)
pacf(dltotal.prod) #ar(4)
acf(ddltotal.prod)
pacf(ddltotal.prod) #ar(3)
#sarima(4,1,0)(3,1,0)
(fit <- arima(log(total.prod[1:535]), c(4, 1,0 ),seasonal = list(order = c(3, 1, 0), period = 12)))
pred <- predict(fit, n.ahead = 10*12)
plot(matrix(total.prod),type = 'l')
lines(2.718^pred$pred,lty=3)
#readxl::read_xlsx("http://hdr.undp.org/sites/default/files/2018_statistical_annex_all.xlsx",sheet=1)
temp1 <- tempfile()
download.file("http://hdr.undp.org/sites/default/files/2018_all_indicators.xlsx",temp1, mode="wb")
hdi.databank <- readxl::read_xlsx(temp1,sheet = 1)
unlink(temp1)
temp2 <- tempfile()
download.file("http://hdr.undp.org/sites/default/files/2018_statistical_annex_all.xlsx",temp2, mode="wb")
hdi.stat <- readxl::read_xlsx(temp2,sheet = 1)
unlink(temp2)
rm(temp1,temp2)
library(tidyverse)
year=as.character(seq(1990,2017))
test=hdi.databank%>%select(-"9999")%>%gather(one_of(year),key = "year",value = "hdi")
View(test)
(fit <- arima(log(total.prod[1:535]), c(3, 1,1 ),seasonal = list(order = c(0,1,1), period = 12)))
pred <- predict(fit, n.ahead = 10*12)
plot(matrix(total.prod),type = 'l')
lines(2.718^pred$pred,lty=3)
View(hdi.stat)
View(hdi.databank)
View(hdi.databank)
View(hdi.stat)
hdi.stat[,2]
pull(hdi.stat,var = 2)
pull(hdi.stat,var = 2)%>%slice(c(10:15,20:30))
pull(hdi.stat,var = 2)%>%slice(10:15)
pull(hdi.stat,var = 2)%>%
slice(hdi.stat,10:15)
slice(hdi.stat,10:15)
pull(hdi.stat,var = 2)%>%which("Iceland")
pull(hdi.stat,var = 2)%>%filter("Iceland")
filter(hdi.stat,hdi.stat[2]="Iceland")
filter(hdi.stat,hdi.stat[2]=="Iceland")
filter(hdi.stat,hdi.stat[2]%in%c("VERY HIGH HUMAN DEVELOPMENT","HIGH HUMAN DEVELOPMENT","MEDIUM HUMAN DEVELOPMENT","LOW HUMAN DEVELOPMENT"))
test2=filter(hdi.stat,hdi.stat[2]%in%c("VERY HIGH HUMAN DEVELOPMENT","HIGH HUMAN DEVELOPMENT","MEDIUM HUMAN DEVELOPMENT","LOW HUMAN DEVELOPMENT"))
test2
View(test2)
test2=filter(hdi.stat,hdi.stat[2]=="VERY HIGH HUMAN DEVELOPMENT")
View(test2)
test2=filter(hdi.stat,hdi.stat[2]%in%c("VERY HIGH HUMAN DEVELOPMENT","HIGH HUMAN DEVELOPMENT"))
test2=filter(hdi.stat,hdi.stat[2] %in% c("VERY HIGH HUMAN DEVELOPMENT","HIGH HUMAN DEVELOPMENT","MEDIUM HUMAN DEVELOPMENT","LOW HUMAN DEVELOPMENT"))
test2=filter(hdi.stat,hdi.stat[2] %in% c("VERY HIGH HUMAN DEVELOPMENT","HIGH HUMAN DEVELOPMENT"))
index=c("VERY HIGH HUMAN DEVELOPMENT","HIGH HUMAN DEVELOPMENT","MEDIUM HUMAN DEVELOPMENT","LOW HUMAN DEVELOPMENT")
test2=filter(hdi.stat,hdi.stat[2] %in% index)
hdi.stat[2]%in%index
hdi.stat[,2]%in%index
hdi.stat[,hdi.stat[,2]%in%index]
hdi.stat[,hdi.stat[,2] == "VERY HIGH HUMAN DEVELOPMENT"]
?Comparison
?base::logic
??logic
1:10 %in% c(1,3,5,9)
hdi.stat[,2]
pull(hdi.stat,var = 2)%in%index
row.name(pull(hdi.stat,var = 2)%in%index)
s
row.names(pull(hdi.stat,var = 2)%in%index)
pull(hdi.stat,var = 2)%in%index
row.names(pull(hdi.stat,var = 2)%in%index)
a=row.names(pull(hdi.stat,var = 2)%in%index)
View(hdi.stat)
hdi.stat=slice(hdi.stat,-1)
View(hdi.stat)
hdi.stat[2,c(1,2)]=hdi.stat[1,c(1,2)]
temp2 <- tempfile()
download.file("http://hdr.undp.org/sites/default/files/2018_statistical_annex_all.xlsx",temp2, mode="wb")
hdi.stat <- readxl::read_xlsx(temp2,sheet = 1)
unlink(temp2)
rm(temp1,temp2)
hdi.stat=slice(hdi.stat,-1)
hdi.stat[2,c(1,2)]
hdi.stat[1,c(1,2)]=hdi.stat[2,c(1,2)]
hdi.stat=slice(hdi.stat,-c(2,3))
colnames(hdi.stat)=hdi.stat[1,]
View(hdi.stat)
View(hdi.stat)
colnames(hdi.stat)
compact(colnames(hdi.stat))
select(hdi.stat,-"NA")
select(hdi.stat,"NA")
temp2 <- tempfile()
download.file("http://hdr.undp.org/sites/default/files/2018_statistical_annex_all.xlsx",temp2, mode="wb")
hdi.stat <- readxl::read_xlsx(temp2,sheet = 1)
unlink(temp2)
rm(temp1,temp2)
hdi.stat=slice(hdi.stat,-1)
hdi.stat[1,c(1,2)]=hdi.stat[2,c(1,2)]
slice(hdi.stat,-c(2,3))%>%select(-c(4,6,8,10,12,14))->hdi.stat
colnames(hdi.stat)=hdi.stat[1,]
hdi.stat=slice(hdi.stat,-1)
filter(hdi.stat,HDI RANK==1)
filter(hdi.stat,"HDI RANK"==1)
filter(hdi.stat,hdi.stat$`HDI rank`==1)
which(hdi.stat$`HDI rank`==1)
filter(hdi.stat,`HDI rank`==1)
temp2 <- tempfile()
download.file("http://hdr.undp.org/sites/default/files/2018_statistical_annex_all.xlsx",temp2, mode="wb")
hdi.stat <- readxl::read_xlsx(temp2,sheet = 1,range = A3-O198)
unlink(temp2)
rm(temp1,temp2)
View(hdi.stat)
temp2 <- tempfile()
download.file("http://hdr.undp.org/sites/default/files/2018_statistical_annex_all.xlsx",temp2, mode="wb")
hdi.stat <- readxl::read_xlsx(temp2,sheet = 1,range = A3-O198)
unlink(temp2)
rm(temp1,temp2)
temp2 <- tempfile()
download.file("http://hdr.undp.org/sites/default/files/2018_statistical_annex_all.xlsx",temp2, mode="wb")
hdi.stat <- readxl::read_xlsx(temp2,sheet = 1,range = "A3-O198")
unlink(temp2)
rm(temp1,temp2)
temp2 <- tempfile()
download.file("http://hdr.undp.org/sites/default/files/2018_statistical_annex_all.xlsx",temp2, mode="wb")
hdi.stat <- readxl::read_xlsx(temp2,sheet = 1,range = "A3:O198")
unlink(temp2)
rm(temp1,temp2)
View(hdi.stat)
colnames(hdi.stat[,c(1,2)])=hdi.stat[1,c(1,2)]
View(hdi.stat)
colnames(hdi.stat)
colnames(hdi.stat)[c(1,2)]=hdi.stat[1,c(1,2)]
View(hdi.stat)
slice(hdi.stat,-c(1,2))%>%select(-c(4,6,8,10,12,14))->hdi.stat
hdi.stat%>%slice(-c(1,2))%>%select(-c(4,6,8,10,12,14))
hdi.stat%>%slice(-c(1,2))
hdi.stat%>%slice(-c(1,2))%>%select(-c(4,6,8,10,12,14))
temp2 <- tempfile()
download.file("http://hdr.undp.org/sites/default/files/2018_statistical_annex_all.xlsx",temp2, mode="wb")
hdi.stat <- readxl::read_xlsx(temp2,sheet = 1,range = "A3:O196")
unlink(temp2)
rm(temp1,temp2)
library(tidyverse)
year=as.character(seq(1990,2017))
test=hdi.databank%>%select(-"9999")%>%gather(one_of(year),key = "year",value = "hdi")
index=c("VERY HIGH HUMAN DEVELOPMENT","HIGH HUMAN DEVELOPMENT","MEDIUM HUMAN DEVELOPMENT","LOW HUMAN DEVELOPMENT")
colnames(hdi.stat)[c(1,2)]=hdi.stat[1,c(1,2)]
hdi.stat%>%slice(-c(1,2))%>%select(-c(4,6,8,10,12))
View(hdi.stat)
temp2 <- tempfile()
download.file("http://hdr.undp.org/sites/default/files/2018_statistical_annex_all.xlsx",temp2, mode="wb")
hdi.stat <- readxl::read_xlsx(temp2,sheet = 1,range = "A3:O196")
unlink(temp2)
rm(temp1,temp2)
View(hdi.stat)
temp2 <- tempfile()
download.file("http://hdr.undp.org/sites/default/files/2018_statistical_annex_all.xlsx",temp2, mode="wb")
hdi.stat <- readxl::read_xlsx(temp2,sheet = 1,range = "A3:M198")
unlink(temp2)
rm(temp1,temp2)
colnames(hdi.stat)[c(1,2)]=hdi.stat[1,c(1,2)]
hdi.stat%>%slice(-c(1,2))%>%select(-c(4,6,8,10,12))
hdi.stat%>%slice(-c(1,2))%>%select(-c(4,6,8,10,12))->hdi.stat
View(hdi.stat)
replace(colnames(hdi.stat),'',',')
replace(colnames(hdi.stat),' ','.')
View(hdi.stat)
class(colnames(hdi.stat))
sapply(colnames(hdi.stat),replace(x,' ','.'))
sapply(colnames(hdi.stat),replace(' ','.'))
replace(colnames(hdi.stat)[1],' ','.')
gsub(" ",".",colnames(hdi.stat)[1])
gsub(" ",".",colnames(hdi.stat))
colnames(hdi.stat)[c(1,2)]=gsub(" ",".",colnames(hdi.stat))
View(hdi.stat)
colnames(hdi.stat)=gsub(" ",".",colnames(hdi.stat))
View(hdi.stat)
hdi.stat
View(hdi.databank)
View(hdi.stat)
temp1 <- tempfile()
download.file("http://hdr.undp.org/sites/default/files/2018_all_indicators.xlsx",temp1, mode="wb")
hdi.databank <- readxl::read_xlsx(temp1,sheet = 1)
unlink(temp1)
temp2 <- tempfile()
download.file("http://hdr.undp.org/sites/default/files/2018_statistical_annex_all.xlsx",temp2, mode="wb")
hdi.stat <- readxl::read_xlsx(temp2,sheet = 1,range = "A3:M198")
unlink(temp2)
rm(temp1,temp2)
library(tidyverse)
year=as.character(seq(1990,2017))
test=hdi.databank%>%select(-"9999")%>%gather(one_of(year),key = "year",value = "hdi")
colnames(hdi.stat)=gsub(" ",".",colnames(hdi.stat))
hdi.stat%>%slice(-c(1,2))%>%select(-c(4,6,8,10,12))->hdi.stat
View(hdi.stat)
View(hdi.stat)
temp1 <- tempfile()
download.file("http://hdr.undp.org/sites/default/files/2018_all_indicators.xlsx",temp1, mode="wb")
hdi.databank <- readxl::read_xlsx(temp1,sheet = 1)
unlink(temp1)
temp2 <- tempfile()
download.file("http://hdr.undp.org/sites/default/files/2018_statistical_annex_all.xlsx",temp2, mode="wb")
hdi.stat <- readxl::read_xlsx(temp2,sheet = 1,range = "A3:M198")
unlink(temp2)
rm(temp1,temp2)
library(tidyverse)
year=as.character(seq(1990,2017))
test=hdi.databank%>%select(-"9999")%>%gather(one_of(year),key = "year",value = "hdi")
colnames(hdi.stat)=gsub(" ",".",colnames(hdi.stat))
hdi.stat%>%slice(-c(1,2))%>%select(-c(4,6,8,10,12))->hdi.stat
View(hdi.stat)
temp2 <- tempfile()
download.file("http://hdr.undp.org/sites/default/files/2018_statistical_annex_all.xlsx",temp2, mode="wb")
hdi.stat <- readxl::read_xlsx(temp2,sheet = 1,range = "A3:M198")
unlink(temp2)
View(hdi.stat)
colnames(hdi.stat)=gsub(" ",".",colnames(hdi.stat))
View(hdi.stat)
temp2 <- tempfile()
download.file("http://hdr.undp.org/sites/default/files/2018_statistical_annex_all.xlsx",temp2, mode="wb")
hdi.stat <- readxl::read_xlsx(temp2,sheet = 1,range = "A3:M198")
unlink(temp2)
rm(temp1,temp2)
View(hdi.stat)
colnames(hdi.stat)=gsub(" ",".",colnames(hdi.stat))
View(hdi.stat)
colnames(hdi.stat)[c(1,2)]
colnames(hdi.stat)[c(1,2)]=c("HDI.rank","Country")
View(hdi.stat)
View(hdi.stat)
hdi.stat%>%slice(-c(1,2))%>%select(-c(4,6,8,10,12))->hdi.stat
View(hdi.stat)
View(hdi.stat)
level_one <- hdi.stat %>% select(Country) %>% filter (!startsWith(Country,'VERY')) %>% pull;
level_two
level_one
level_one <- hdi.stat %>% select(Country) %>% filter (startsWith(Country,'VERY')) %>% pull;
level_two <- hdi.stat %>% select(Country) %>% filter (startsWith(Country,'HIGH')) %>% pull;
level_three <- hdi.stat %>% select(Country) %>% filter (startsWith(Country,'MEDIUM')) %>% pull;
level_four <- hdi.stat %>% select(Country) %>% filter (startsWith(Country,'LOW')) %>% pull;
level_one <- hdi.stat %>% select(Country) %>% filter (startsWith(Country,'VERY')) %>% pull
level_two <- hdi.stat %>% select(Country) %>% filter (startsWith(Country,'HIGH')) %>% pull
level_three <- hdi.stat %>% select(Country) %>% filter (startsWith(Country,'MEDIUM')) %>% pull
level_four <- hdi.stat %>% select(Country) %>% filter (startsWith(Country,'LOW')) %>% pull
which(hdi.stat$Country==level_one)
which(hdi.stat$Country==level_two)
hdi.stat%>%which(Country==level_one)
hdi.stat%>%match(Country,level_one)
hdi.stat%>%match(Country,level_one)
View(hdi.stat)
match(hdi.stat$Country,level_one)
level_one_index= which(hdi.stat$Country==level_one)
level_one_index
level_two_index= which(hdi.stat$Country==level_two)
level_four_index=which(hdi.stat$Country==level_four)
hdi.stat%>%slice(level_one_index+1:level_two_index-1)
test=hdi.stat%>%slice(level_one_index+1:level_two_index-1)
View(test)
test=hdi.stat%>%slice(level_one_index+1:level_two_index-2)
View(test)
View(hdi.stat)
test=hdi.stat%>%slice(level_one_index+1:level_two_index-2)%>%mutate(level=level_one)
View(test)
test=hdi.stat%>%slice(level_two_index+1:level_three_index-2)%>%mutate(level=level_two),
test=hdi.stat%>%slice(level_two_index+1:level_three_index-2)%>%mutate(level=level_two)
level_three_index= which(hdi.stat$Country==level_three)
level_four_index=which(hdi.stat$Country==level_four)
test=hdi.stat%>%slice(level_two_index+1:level_three_index-2)%>%mutate(level=level_two)
View(test)
level_two_index= which(hdi.stat$Country==level_two)
test=hdi.stat%>%slice((level_one_index+1):(level_two_index-1))%>%mutate(level=level_one),
test=hdi.stat%>%slice((level_two_index+1):level_three_index-2)%>%mutate(level=level_two)
test=hdi.stat%>%slice((level_one_index+1):(level_two_index-1))%>%mutate(level=level_one)
View(test)
test=hdi.stat%>%slice((level_two_index+1):(level_three_index-1))%>%mutate(level=level_two)
View(test)
test=hdi.stat%>%slice((level_three_index+1):(level_four_index-1))%>%mutate(level=level_two)
View(test)
test=hdi.stat%>%slice((level_four_index+1):nrow(hdi.stat))%>%mutate(level=level_two)
View(test)
test=rbind(hdi.stat%>%slice((level_one_index+1):(level_two_index-1))%>%mutate(level=level_one),
hdi.stat%>%slice((level_two_index+1):(level_three_index-1))%>%mutate(level=level_two),
hdi.stat%>%slice((level_three_index+1):(level_four_index-1))%>%mutate(level=level_two),
hdi.stat%>%slice((level_four_index+1):nrow(hdi.stat))%>%mutate(level=level_two))
View(test)
test=rbind(hdi.stat%>%slice((level_one_index+1):(level_two_index-1))%>%mutate(level=level_one),
hdi.stat%>%slice((level_two_index+1):(level_three_index-1))%>%mutate(level=level_two),
hdi.stat%>%slice((level_three_index+1):(level_four_index-1))%>%mutate(level=level_three),
hdi.stat%>%slice((level_four_index+1):nrow(hdi.stat))%>%mutate(level=level_four))
View(test)
View(test)
hdi.stat.m=rbind(hdi.stat%>%slice((level_one_index+1):(level_two_index-1))%>%mutate(level=level_one),
hdi.stat%>%slice((level_two_index+1):(level_three_index-1))%>%mutate(level=level_two),
hdi.stat%>%slice((level_three_index+1):(level_four_index-1))%>%mutate(level=level_three),
hdi.stat%>%slice((level_four_index+1):nrow(hdi.stat))%>%mutate(level=level_four))
temp1 <- tempfile()
download.file("http://hdr.undp.org/sites/default/files/2018_all_indicators.xlsx",temp1, mode="wb")
hdi.databank <- readxl::read_xlsx(temp1,sheet = 1)
unlink(temp1)
year=as.character(seq(1990,2017))
hdi.databank=hdi.databank%>%select(-"9999")%>%gather(one_of(year),key = "year",value = "hdi")
math(hdi.databank$country_name,hdi.stat.m$Country)
match(hdi.databank$country_name,hdi.stat.m$Country)
View(hdi.databank)
hdi.databank%>%mutate(level=hdi.stat.m$level[match(hdi.databank$country_name,hdi.stat.m$Country)])
View(hdi.databank)
test=hdi.databank%>%mutate(level=hdi.stat.m$level[match(hdi.databank$country_name,hdi.stat.m$Country)])
View(test)
which(is.na(hdi.stat.m$level))
is.na(hdi.stat.m$level)
which(is.na(test$level))
View(test)
